% Plantas
planta(cacto, tamanho(pequeno), manutencao(baixa), finalidade(ornamental), luminosidade(alta)).
planta(cacto, tamanho(medio), manutencao(baixa), finalidade(ornamental), luminosidade(alta)).
planta(suculenta, tamanho(pequeno), manutencao(baixa), finalidade(ornamental), luminosidade(alta)).
planta(samambaia, tamanho(medio), manutencao(moderada), finalidade(ornamental), luminosidade(baixa)).
planta(roseira, tamanho(medio), manutencao(alta), finalidade(ornamental), luminosidade(alta)).
planta(bromelia, tamanho(medio), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
planta(bambu, tamanho(grande), manutencao(baixa), finalidade(ornamental), luminosidade(media)).
planta(erva_mate, tamanho(grande), manutencao(alta), finalidade(alimenticio), luminosidade(alta)).
planta(espada_de_sao_jorge, tamanho(medio), manutencao(baixa), finalidade(ornamental), luminosidade(baixa)).
planta(lirio, tamanho(medio), manutencao(moderada), finalidade(ornamental), luminosidade(media)).
planta(jiboia, tamanho(medio), manutencao(baixa), finalidade(ornamental), luminosidade(baixa)).
planta(costela_de_adao, tamanho(grande), manutencao(moderada), finalidade(ornamental), luminosidade(baixa)).
planta(anturio, tamanho(pequeno), manutencao(moderada), finalidade(ornamental), luminosidade(media)).
planta(violeta, tamanho(pequeno), manutencao(moderada), finalidade(ornamental), luminosidade(baixa)).
planta(orquidea, tamanho(pequeno), manutencao(alta), finalidade(ornamental), luminosidade(alta)).
planta(orquidea, tamanho(medio), manutencao(alta), finalidade(ornamental), luminosidade(alta)).
planta(begonia, tamanho(pequeno), manutencao(moderada), finalidade(ornamental), luminosidade(baixa)).
planta(begonia, tamanho(medio), manutencao(moderada), finalidade(ornamental), luminosidade(baixa)).
planta(aloe_vera, tamanho(medio), manutencao(baixa), finalidade(medicinal), luminosidade(alta)).
planta(hortela, tamanho(pequeno), manutencao(baixa), finalidade(alimenticio), luminosidade(media)).
planta(lavanda, tamanho(pequeno), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
planta(lavanda, tamanho(medio), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
planta(capim_limao, tamanho(medio), manutencao(baixa), finalidade(alimenticio), luminosidade(alta)).
planta(erva_cidreira, tamanho(medio), manutencao(baixa), finalidade(medicinal), luminosidade(media)).
planta(pimenteira, tamanho(pequeno), manutencao(moderada), finalidade(alimenticio), luminosidade(alta)).
planta(tomateiro, tamanho(medio), manutencao(alta), finalidade(alimenticio), luminosidade(alta)).
planta(tomateiro, tamanho(grande), manutencao(alta), finalidade(alimenticio), luminosidade(alta)).
planta(mangueira, tamanho(grande), manutencao(alta), finalidade(alimenticio), luminosidade(alta)).
planta(limoeiro, tamanho(grande), manutencao(moderada), finalidade(alimenticio), luminosidade(alta)).
planta(laranjeira, tamanho(grande), manutencao(moderada), finalidade(alimenticio), luminosidade(alta)).
planta(cajueiro, tamanho(grande), manutencao(alta), finalidade(alimenticio), luminosidade(alta)).
planta(goiabeira, tamanho(grande), manutencao(moderada), finalidade(alimenticio), luminosidade(alta)).
planta(girassol, tamanho(grande), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
planta(girassol, tamanho(grande), manutencao(moderada), finalidade(alimenticio), luminosidade(alta)).
planta(margarida, tamanho(pequeno), manutencao(baixa), finalidade(ornamental), luminosidade(alta)).
planta(tulipa, tamanho(pequeno), manutencao(alta), finalidade(ornamental), luminosidade(alta)).
planta(ipe, tamanho(grande), manutencao(alta), finalidade(ornamental), luminosidade(alta)).
planta(magnolia, tamanho(grande), manutencao(alta), finalidade(ornamental), luminosidade(alta)).
planta(jacaranda, tamanho(grande), manutencao(alta), finalidade(ornamental), luminosidade(alta)).
planta(quaresmeira, tamanho(grande), manutencao(moderada), finalidade(ornamental), luminosidade(media)).
planta(palmeira, tamanho(grande), manutencao(baixa), finalidade(ornamental), luminosidade(alta)).
planta(coqueiro, tamanho(grande), manutencao(alta), finalidade(alimenticio), luminosidade(alta)).
planta(mangabeira, tamanho(grande), manutencao(alta), finalidade(alimenticio), luminosidade(alta)).
planta(boldo, tamanho(medio), manutencao(baixa), finalidade(medicinal), luminosidade(alta)).
planta(alecrim, tamanho(pequeno), manutencao(baixa), finalidade(alimenticio), luminosidade(alta)).
planta(alecrim, tamanho(pequeno), manutencao(baixa), finalidade(medicinal), luminosidade(alta)).
planta(roma, tamanho(medio), manutencao(moderada), finalidade(alimenticio), luminosidade(alta)).
planta(alamanda, tamanho(grande), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
planta(amaranto, tamanho(grande), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
planta(amaranto, tamanho(grande), manutencao(moderada), finalidade(alimenticio), luminosidade(alta)).
planta(caliandra, tamanho(medio), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
planta(camelia, tamanho(grande), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
planta(cipo_de_sao_joao, tamanho(medio), manutencao(moderada), finalidade(ornamental), luminosidade(baixa)).
planta(rosa_do_deserto, tamanho(pequeno), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
planta(heliconia, tamanho(grande), manutencao(moderada), finalidade(ornamental), luminosidade(alta)).
%Novas Plantas

planta(alface, tamanho(pequeno), manutencao(baixa), finalidade(alimenticio), luminosidade(baixa)).
planta(hortela_pimenta, tamanho(pequeno), manutencao(baixa), finalidade(medicinal), luminosidade(baixa)).
planta(coentro, tamanho(pequeno), manutencao(moderada), finalidade(alimenticio), luminosidade(baixa)).
planta(pimenta_biquinho, tamanho(pequeno), manutencao(alta), finalidade(alimenticio), luminosidade(baixa)).
planta(ervas_frescas, tamanho(pequeno), manutencao(baixa), finalidade(medicinal), luminosidade(moderada)).
planta(gengibre, tamanho(medio), manutencao(moderada), finalidade(alimenticio), luminosidade(baixa)).
planta(pimenta_malagueta, tamanho(medio), manutencao(alta), finalidade(alimenticio), luminosidade(baixa)).
planta(ipe_roxo, tamanho(grande), manutencao(alta), finalidade(medicinal), luminosidade(baixa)).
planta(abacateiro, tamanho(grande), manutencao(baixa), finalidade(alimenticio), luminosidade(moderada)).
planta(angico, tamanho(grande), manutencao(moderada), finalidade(medicinal), luminosidade(moderada)).
planta(tansagem, tamanho(medio), manutencao(baixa), finalidade(medicinal), luminosidade(moderada)).
planta(rucula, tamanho(pequeno), manutencao(alta), finalidade(alimenticio), luminosidade(moderada)).
planta(ameixeira, tamanho(grande), manutencao(moderada), finalidade(alimenticio), luminosidade(baixa)).
planta(eucalipto, tamanho(grande), manutencao(baixa), finalidade(medicinal), luminosidade(alta)).
planta(tomilho, tamanho(pequeno), manutencao(moderada), finalidade(medicinal), luminosidade(alta)).
planta(ervilha, tamanho(medio), manutencao(moderada), finalidade(alimenticio), luminosidade(moderada)).




% Menu com repetição e combinação de filtros
menu :- 
    writeln('Características das plantas:'),
    writeln('1. Tamanho da planta'),
    writeln('2. Manutenção da planta'),
    writeln('3. Finalidade da planta'),
    writeln('4. Luminosidade da planta'),
    writeln('5. Todas as perguntas'),
    writeln('6. Combinar filtros'),
    writeln('7. Sair'),
    read(Opcao),
    (   Opcao = 7
    ->  writeln('Saindo do sistema.')
    ;   fazer_pergunta(Opcao),
        menu  % Chama o menu novamente, criando o laço de repetição
    ).


% Tamanhos e suas representações numéricas
tamanho_opcao(1, pequeno).
tamanho_opcao(2, medio).
tamanho_opcao(3, grande).

% Manutenção e suas representações numéricas
manutencao_opcao(1, baixa).
manutencao_opcao(2, moderada).
manutencao_opcao(3, alta).

% Finalidade e suas representações numéricas
finalidade_opcao(1, ornamental).
finalidade_opcao(2, alimenticio).
finalidade_opcao(3, medicinal).

% Luminosidade e suas representações numéricas
luminosidade_opcao(1, baixa).
luminosidade_opcao(2, moderada).
luminosidade_opcao(3, alta).

% Lógica para lidar com as opções escolhidas
fazer_pergunta(1) :- 
    writeln('Escolha o tamanho da planta:'), 
    writeln('1. Pequeno'),
    writeln('2. Médio'),
    writeln('3. Grande'),
    read(Op),
    tamanho_opcao(Op, Tamanho),
    listar_por_tamanho(tamanho(Tamanho)).

fazer_pergunta(2) :- 
    writeln('Escolha a manutenção da planta:'), 
    writeln('1. Baixa'),
    writeln('2. Moderada'),
    writeln('3. Alta'),
    read(Op),
    manutencao_opcao(Op, Manutencao),
    %recomendacao(_, manutencao(Manutencao), _, _).
    listar_por_manutencao(manutencao(Manutencao)).

fazer_pergunta(3) :- 
    writeln('Escolha a finalidade da planta:'),
    writeln('1. Ornamental'),
    writeln('2. Alimentício'),
    writeln('3. Medicinal'),
    read(Op),
    finalidade_opcao(Op, Finalidade),
    %recomendacao(_, _, finalidade(Finalidade), _).
	listar_por_finalidade(finalidade(Finalidade)).

fazer_pergunta(4) :- 
    writeln('Escolha a luminosidade da planta:'), 
    writeln('1. Baixa'),
    writeln('2. Moderada'),
    writeln('3. Alta'),
    read(Op),
    luminosidade_opcao(Op, Luminosidade),
    %recomendacao(_, _, _, luminosidade(Luminosidade)).
	listar_por_luminosidade(luminosidade(Luminosidade)).

fazer_pergunta(5) :- 
    writeln('Escolha o tamanho da planta:'),
    writeln('1. Pequeno'),
    writeln('2. Médio'),
    writeln('3. Grande'),
    read(TamanhoOp),
    tamanho_opcao(TamanhoOp, Tamanho),
    
    writeln('Escolha a manutenção da planta:'),
    writeln('1. Baixa'),
    writeln('2. Moderada'),
    writeln('3. Alta'),
    read(ManutencaoOp),
    manutencao_opcao(ManutencaoOp, Manutencao),

    writeln('Escolha a finalidade da planta:'),
    writeln('1. Ornamental'),
    writeln('2. Alimentício'),
    writeln('3. Medicinal'),
    read(FinalidadeOp),
    finalidade_opcao(FinalidadeOp, Finalidade),

    writeln('Escolha a luminosidade da planta:'),
    writeln('1. Baixa'),
    writeln('2. Moderada'),
    writeln('3. Alta'),
    read(LuminosidadeOp),
    luminosidade_opcao(LuminosidadeOp, Luminosidade),
    
    recomendacao(tamanho(Tamanho), manutencao(Manutencao), finalidade(Finalidade), luminosidade(Luminosidade)).

% Função para lidar com as combinações de filtros
fazer_pergunta(6) :-
    writeln('Escolha dois critérios para combinar:'),
    writeln('1. Tamanho e Finalidade'),
    writeln('2. Tamanho e Manutenção'),
    writeln('3. Finalidade e Manutenção'),
    writeln('4. Finalidade e Luminosidade'),
    read(OpcaoComb),
    (   OpcaoComb = 1 -> combinar_tamanho_finalidade
    ;   OpcaoComb = 2 -> combinar_tamanho_manutencao
    ;   OpcaoComb = 3 -> combinar_finalidade_manutencao
    ;   OpcaoComb = 4 -> combinar_finalidade_luminosidade
    ;   writeln('Opção inválida.')
    ).



% Listar plantas por tamanho, removendo duplicatas
listar_por_tamanho(Tamanho) :-
    findall(Planta, planta(Planta, Tamanho, _, _, _), Plantas),
    sort(Plantas, PlantasUnicas),  % Remove duplicatas
    (   PlantasUnicas = []
    ->  writeln('Nenhuma planta encontrada com esse tamanho.')
    ;   writeln('As plantas com o tamanho selecionado são:'),
        listar_com_numeracao(PlantasUnicas)
    ).

% Listar plantas por manutenção, removendo duplicatas
listar_por_manutencao(Manutencao) :-
    findall(Planta, planta(Planta, _, Manutencao, _, _), Plantas),
    sort(Plantas, PlantasUnicas),  % Remove duplicatas
    (   PlantasUnicas = []
    ->  writeln('Nenhuma planta encontrada com essa manutenção.')
    ;   writeln('As plantas com a manutenção selecionada são:'),
        listar_com_numeracao(PlantasUnicas)
    ).

% Listar plantas por finalidade, removendo duplicatas
listar_por_finalidade(Finalidade) :-
    findall(Planta, planta(Planta, _, _, Finalidade, _), Plantas),
    sort(Plantas, PlantasUnicas),  % Remove duplicatas
    (   PlantasUnicas = []
    ->  writeln('Nenhuma planta encontrada com essa finalidade.')
    ;   writeln('As plantas com a finalidade selecionada são:'),
        listar_com_numeracao(PlantasUnicas)
    ).

% Listar plantas por luminosidade, removendo duplicatas
listar_por_luminosidade(Luminosidade) :-
    findall(Planta, planta(Planta, _, _, _, Luminosidade), Plantas),
    sort(Plantas, PlantasUnicas),  % Remove duplicatas
    (   PlantasUnicas = []
    ->  writeln('Nenhuma planta encontrada com essa luminosidade.')
    ;   writeln('As plantas com a luminosidade selecionada são:'),
        listar_com_numeracao(PlantasUnicas)
    ).

% Combinar filtros: Tamanho e Finalidade
combinar_tamanho_finalidade :-
    writeln('Escolha o tamanho da planta:'),
    writeln('1. Pequeno'),
    writeln('2. Médio'),
    writeln('3. Grande'),
    read(TamanhoOp),
    tamanho_opcao(TamanhoOp, Tamanho),
    
    writeln('Escolha a finalidade da planta:'),
    writeln('1. Ornamental'),
    writeln('2. Alimentício'),
    writeln('3. Medicinal'),
    read(FinalidadeOp),
    finalidade_opcao(FinalidadeOp, Finalidade),
    
    findall(Planta, (planta(Planta, tamanho(Tamanho), _, finalidade(Finalidade), _)), Plantas),
    sort(Plantas, PlantasUnicas),
    (   PlantasUnicas = []
    ->  writeln('Nenhuma planta encontrada com essas características.')
    ;   writeln('As plantas com as características selecionadas são:'),
        listar_com_numeracao(PlantasUnicas)
    ).

% Combinar filtros: Tamanho e Manutenção
combinar_tamanho_manutencao :-
    writeln('Escolha o tamanho da planta:'),
    writeln('1. Pequeno'),
    writeln('2. Médio'),
    writeln('3. Grande'),
    read(TamanhoOp),
    tamanho_opcao(TamanhoOp, Tamanho),
    
    writeln('Escolha a manutenção da planta:'),
    writeln('1. Baixa'),
    writeln('2. Moderada'),
    writeln('3. Alta'),
    read(ManutencaoOp),
    manutencao_opcao(ManutencaoOp, Manutencao),
    
    findall(Planta, (planta(Planta, tamanho(Tamanho), manutencao(Manutencao), _, _)), Plantas),
    sort(Plantas, PlantasUnicas),
    (   PlantasUnicas = []
    ->  writeln('Nenhuma planta encontrada com essas características.')
    ;   writeln('As plantas com as características selecionadas são:'),
        listar_com_numeracao(PlantasUnicas)
    ).

% Combinar filtros: Finalidade e Manutenção
combinar_finalidade_manutencao :-
    writeln('Escolha a finalidade da planta:'),
    writeln('1. Ornamental'),
    writeln('2. Alimentício'),
    writeln('3. Medicinal'),
    read(FinalidadeOp),
    finalidade_opcao(FinalidadeOp, Finalidade),
    
    writeln('Escolha a manutenção da planta:'),
    writeln('1. Baixa'),
    writeln('2. Moderada'),
    writeln('3. Alta'),
    read(ManutencaoOp),
    manutencao_opcao(ManutencaoOp, Manutencao),
    
    findall(Planta, (planta(Planta, _, manutencao(Manutencao), finalidade(Finalidade), _)), Plantas),
    sort(Plantas, PlantasUnicas),
    (   PlantasUnicas = []
    ->  writeln('Nenhuma planta encontrada com essas características.')
    ;   writeln('As plantas com as características selecionadas são:'),
        listar_com_numeracao(PlantasUnicas)
    ).

% Combinar filtros: Finalidade e Luminosidade
combinar_finalidade_luminosidade :-
    writeln('Escolha a finalidade da planta:'),
    writeln('1. Ornamental'),
    writeln('2. Alimentício'),
    writeln('3. Medicinal'),
    read(FinalidadeOp),
    finalidade_opcao(FinalidadeOp, Finalidade),
    
    writeln('Escolha a luminosidade da planta:'),
    writeln('1. Baixa'),
    writeln('2. Moderada'),
    writeln('3. Alta'),
    read(LuminosidadeOp),
    luminosidade_opcao(LuminosidadeOp, Luminosidade),
    
    findall(Planta, (planta(Planta, _, _, finalidade(Finalidade), luminosidade(Luminosidade))), Plantas),
    sort(Plantas, PlantasUnicas),
    (   PlantasUnicas = []
    ->  writeln('Nenhuma planta encontrada com essas características.')
    ;   writeln('As plantas com as características selecionadas são:'),
        listar_com_numeracao(PlantasUnicas)
    ).

% Função auxiliar para listar com numeração
listar_com_numeracao(Plantas) :-
    listar_com_numeracao(Plantas, 1).

listar_com_numeracao([], _).
listar_com_numeracao([Planta|Resto], N) :-
    format('~d. ~w~n', [N, Planta]),
    N1 is N + 1,
    listar_com_numeracao(Resto, N1).


% Recomendação
%recomendacao(Tamanho, Manutencao, Finalidade, Luminosidade) :-
%    planta(Planta, Tamanho, Manutencao, Finalidade, Luminosidade),
%    format('Recomendamos a planta ~w.~n', [Planta]),
%	writeln('').

% Recomendação com formatação
recomendacao(Tamanho, Manutencao, Finalidade, Luminosidade) :-
    findall(Planta, planta(Planta, Tamanho, Manutencao, Finalidade, Luminosidade), Plantas),
    (   Plantas = []
    ->  writeln('Desculpe, não encontramos uma planta que corresponda às especificações fornecidas.')
    ;   writeln('Com base nas suas escolhas, recomendamos as seguintes plantas:'),
        listar_com_numeracao(Plantas)
    ).


recomendacao(_, _, _, _) :-
    writeln('Desculpe, não encontramos uma planta que corresponda às especificações fornecidas.').

% Iniciar
inicio :- menu.